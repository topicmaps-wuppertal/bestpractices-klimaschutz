{"version":3,"sources":["helper/itemConverter.js","SecondaryInfo.js","App.js","reportWebVitals.js","index.js"],"names":["convertBPKlimaItemsToFeature","itemIn","a","addSVGToProps","i","thema","icon","item","text","standort","name","geometry","geojson","farbe","color","info","header","title","additionalInfo","beschreibung","subtitle","strasse","hausnummer","plz","stadt","url","website","bild","foto","type","selected","crs","properties","InfoPanel","useContext","FeatureCollectionContext","selectedFeature","items","angebot","undefined","weitereAngebote","filter","testItem","id","addOffers","ang","push","kategorien","subSections","SecondaryInfoPanelSection","bsStyle","style","fontSize","padding","paddingTop","bemerkung","kommentar","length","border","xwidth","Object","keys","map","key","index","paddingBottom","verticalAlign","val","join","minHeight4MainSextion","SecondaryInfo","titleIconName","mainSection","width","minHeight","alt","paddingLeft","paddingRight","float","src","host","getGazData","setGazData","prefix","sources","md5FetchText","adressen","bezirke","quartiere","pois","kitas","bpklimastandorte","gazData","getGazDataForTopicIds","App","useState","useEffect","TopicMapContextProvider","featureItemsURL","getFeatureStyler","getGTMFeatureStyler","convertItemToFeature","clusteringOptions","iconCreateFunction","getClusterIconCreatorFunction","props","clusteringEnabled","TopicMapComponent","gazetteerSearchPlaceholder","infoBox","GenericInfoBoxFromFeature","pixelwidth","config","displaySecondaryInfoAction","city","navigator","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","secondaryInfo","FeatureCollection","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c6346e8b.chunk.js","sourcesContent":["import { addSVGToProps, DEFAULT_SVG } from \"react-cismap/tools/svgHelper\";\nconst convertBPKlimaItemsToFeature = async (itemIn) => {\n  let item = await addSVGToProps(itemIn, (i) => i.thema.icon);\n  const text = item?.standort?.name || \"Kein Standort\";\n  const type = \"Feature\";\n  const selected = false;\n  const geometry = item?.standort?.geojson;\n  const color = item?.thema?.farbe;\n  // item.svg=DEFAULT_SVG.code;\n  item.color = item?.thema.farbe;\n  const info = {\n    header: item.thema.name,\n    title: text,\n    additionalInfo: item?.beschreibung,\n    subtitle: (\n      <span>\n        {item?.standort?.strasse} {item?.standort?.hausnummer}\n        <br />\n        {item?.standort?.plz} {item?.standort?.stadt}\n      </span>\n    ),\n  };\n  item.info = info;\n  item.url = item?.website;\n  if (item.bild) {\n    item.foto = \"https://www.wuppertal.de/geoportal/standort_klima/fotos/\" + item.bild;\n  }\n\n  return {\n    text,\n    type,\n    selected,\n    geometry,\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::25832\",\n      },\n    },\n    properties: item,\n  };\n};\n\nexport default convertBPKlimaItemsToFeature;\n","import React, { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nconst InfoPanel = () => {\n  const { selectedFeature, items } = useContext(FeatureCollectionContext);\n\n  const angebot = selectedFeature?.properties;\n\n  if (angebot !== undefined) {\n    let foto;\n    if (angebot.bild !== undefined) {\n      foto = \"https://www.wuppertal.de/geoportal/standort_klima/fotos/\" + angebot.bild;\n    }\n\n    const weitereAngebote = items.filter(\n      (testItem) => testItem?.standort.id === angebot.standort.id && testItem.id !== angebot.id\n    );\n    //data structure for \"weitere Angebote\"\n    // gruppenwechsel for thema\n\n    const addOffers = {};\n    for (const ang of weitereAngebote) {\n      if (addOffers[ang.thema.name] === undefined) {\n        addOffers[ang.thema.name] = [];\n      }\n      addOffers[ang.thema.name].push(ang.kategorien);\n    }\n\n    const subSections = [\n      <SecondaryInfoPanelSection\n        key='standort'\n        bsStyle='info'\n        header={\"Standort: \" + angebot?.standort?.name}\n      >\n        <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n          {angebot?.standort && (\n            <b>\n              {angebot?.standort?.strasse} {angebot?.standort?.hausnummer}\n              <br />\n              {angebot?.standort?.plz} {angebot?.standort?.stadt}\n              <br />\n            </b>\n          )}\n\n          {angebot?.standort?.beschreibung && (\n            <div>\n              {angebot?.standort?.beschreibung}\n              <br />\n            </div>\n          )}\n          {angebot?.standort?.bemerkung && (\n            <div>\n              {angebot?.standort?.bemerkung} <br />\n            </div>\n          )}\n          {angebot?.standort?.kommentar && (\n            <div>\n              {angebot?.standort?.kommentar} <br />\n            </div>\n          )}\n        </div>\n      </SecondaryInfoPanelSection>,\n    ];\n\n    if (weitereAngebote.length > 0) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='weitereAngebote'\n          header='Weitere Angebote an diesem Standort:'\n          bsStyle='success'\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <table border={0} style={{ xwidth: \"100%\" }}>\n              <tbody>\n                {Object.keys(addOffers).map((key, index) => {\n                  return (\n                    <tr style={{ paddingBottom: 10 }} key={\"addAng\" + index}>\n                      <td style={{ verticalAlign: \"top\", padding: 5 }} key={\"addAng.L.\" + index}>\n                        {key}:\n                      </td>\n                      <td style={{ verticalAlign: \"top\", padding: 5 }} key={\"addAng.R.\" + index}>\n                        {addOffers[key].map((val, index) => {\n                          return <div key={\"kategorien.\" + index}>{val.join(\", \")}</div>;\n                        })}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n          {/* <pre>{JSON.stringify(addOffers, null, 2)}</pre> */}\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    let minHeight4MainSextion = undefined;\n    if (foto !== undefined) {\n      minHeight4MainSextion = 250;\n    }\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: \" + angebot.kategorien.join(\", \")}\n        mainSection={\n          <div style={{ width: \"100%\", minHeight: minHeight4MainSextion }}>\n            {foto !== undefined && (\n              <img\n                alt='Bild'\n                style={{\n                  paddingLeft: 10,\n                  paddingRight: 10,\n                  float: \"right\",\n                  paddingBottom: \"5px\",\n                }}\n                src={foto}\n                width='250'\n              />\n            )}\n            <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n              {angebot.beschreibung && (\n                <b>\n                  {angebot.beschreibung}\n                  <br />\n                </b>\n              )}\n              {angebot.bemerkung && (\n                <div>\n                  {angebot.bemerkung} <br />\n                </div>\n              )}\n              {angebot.kommentar && (\n                <div>\n                  {angebot.kommentar} <br />\n                </div>\n              )}\n            </div>\n          </div>\n        }\n        subSections={subSections}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import { useEffect } from \"react\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport \"react-cismap/topicMaps.css\";\nimport { md5FetchText, fetchJSON } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\n\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\n\nimport convertBPKlimaItemsToFeature from \"./helper/itemConverter\";\nimport InfoPanel from \"./SecondaryInfo\";\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\n\nconst getGazData = async (setGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/kitas.json\");\n  sources.bpklimastandorte = await md5FetchText(prefix, host + \"/data/bpklimastandorte.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"bpklimastandorte\",\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n\nfunction App() {\n  const [gazData, setGazData] = useState([]);\n  useEffect(() => {\n    getGazData(setGazData);\n  }, []);\n  return (\n    <TopicMapContextProvider\n      featureItemsURL={host + \"/data/bpklima.data.json\"}\n      getFeatureStyler={getGTMFeatureStyler}\n      convertItemToFeature={convertBPKlimaItemsToFeature}\n      clusteringOptions={{\n        iconCreateFunction: getClusterIconCreatorFunction(30, (props) => props.color),\n      }}\n      clusteringEnabled={true}\n    >\n      <TopicMapComponent\n        gazData={gazData}\n        gazetteerSearchPlaceholder='Stadtteil | Adresse | POI | Standorte'\n        infoBox={\n          <GenericInfoBoxFromFeature\n            pixelwidth={400}\n            config={{\n              displaySecondaryInfoAction: true,\n              city: \"Wuppertal\",\n              navigator: {\n                noun: {\n                  singular: \"Standort\",\n                  plural: \"Standorte\",\n                },\n              },\n              noCurrentFeatureTitle: \"Keine Standorte gefunden\",\n              noCurrentFeatureContent: \"\",\n            }}\n          />\n        }\n        secondaryInfo={<InfoPanel />}\n      >\n        <FeatureCollection />\n      </TopicMapComponent>\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}